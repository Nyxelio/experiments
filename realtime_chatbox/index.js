// Generated by CoffeeScript 1.9.3
(function() {
  var app, express, http, io;

  express = require('express');

  app = express();

  http = require('http').Server(app);

  io = require('socket.io')(http);

  app.use(express["static"](__dirname + "/public"));

  io.on('connection', function(socket) {
    socket.on('add user', (function(_this) {
      return function(username) {
        socket.username = username;
        console.log('a user connected');
        socket.emit('login');
        return socket.broadcast.emit('user connect', username);
      };
    })(this));
    socket.on('disconnect', function() {
      console.log('user disconnected');
      return io.emit('user disconnect', 'user');
    });
    socket.on('typing', function() {
      return socket.broadcast.emit('typing', {
        username: socket.username
      });
    });
    socket.on('stop typing', function() {
      return socket.broadcast.emit('stop typing', {
        username: socket.username
      });
    });
    return socket.on('new message', function(data) {
      return socket.broadcast.emit('new message', {
        username: socket.username,
        message: data
      });
    });
  });

  http.listen(3000, function() {
    return console.log('listening on *:3000');
  });

}).call(this);

//# sourceMappingURL=index.js.map
